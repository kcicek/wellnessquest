{"version":3,"file":"index-Fb04Jmg6.js","sources":["../../src/dataLoader.js","../../src/utils.js","../../src/audio.js","../../src/game.js","../../src/ui.js","../../src/minigame.js","../../main.ts"],"sourcesContent":["async function fetchJSON(path) {\n    const res = await fetch(path);\n    if (!res.ok)\n        throw new Error(`Failed to load ${path}`);\n    return res.json();\n}\nexport async function loadAllData() {\n    // JSON expected in root directory relative to index.html\n    // Assets now served from public/data/ (root-relative after build with base) so use relative folder path\n    const basePath = 'data/';\n    const [playerStatsFile, foodsFile, fitnessFile, diseasesFile, economyFile, gameRulesFile] = await Promise.all([\n        fetchJSON(basePath + 'playerStats.json'),\n        fetchJSON(basePath + 'foods.json'),\n        fetchJSON(basePath + 'fitnessActions.json'),\n        fetchJSON(basePath + 'diseases.json'),\n        fetchJSON(basePath + 'economy.json'),\n        fetchJSON(basePath + 'gameRules.json')\n    ]);\n    return {\n        playerStats: playerStatsFile.playerStats,\n        foods: foodsFile.foods,\n        fitnessActions: fitnessFile.fitnessActions,\n        diseases: diseasesFile.diseases,\n        economy: economyFile,\n        gameRules: gameRulesFile\n    };\n}\n//# sourceMappingURL=dataLoader.js.map","// Utility helpers\nexport function clamp(value, min, max) {\n    return Math.min(max, Math.max(min, value));\n}\nexport function evalExpression(expr, context) {\n    // Extremely small helper to evaluate simple arithmetic expressions referencing context keys.\n    // Not secure for untrusted input; fine for controlled game formulas.\n    const func = new Function(...Object.keys(context), `return (${expr});`);\n    return func(...Object.values(context));\n}\nexport function formatDelta(v) {\n    if (v === 0)\n        return '0';\n    return v > 0 ? `+${v}` : `${v}`;\n}\n//# sourceMappingURL=utils.js.map","// Simple audio manager using Web Audio API with synthesized tones / noise bursts\n// No external assets – keeps bundle light.\nclass AudioManager {\n    constructor() {\n        Object.defineProperty(this, \"ctx\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"enabled\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"started\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"masterGain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"debug\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"playCount\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"lastError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"keepAliveId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"reinitAttempts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"maxReinit\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        Object.defineProperty(this, \"fallbackAudioEl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n    }\n    init() {\n        if (this.started && this.ctx) {\n            if (this.ctx.state === 'suspended')\n                this.ctx.resume().catch(() => { });\n            return;\n        }\n        try {\n            this.ctx = new (window.AudioContext || window.webkitAudioContext)();\n            this.masterGain = this.ctx.createGain();\n            this.masterGain.gain.value = 0.6;\n            this.masterGain.connect(this.ctx.destination);\n            this.started = true;\n            if (this.debug)\n                console.log('[Audio] context started state=', this.ctx.state);\n            // iOS unlock silent buffer\n            const buffer = this.ctx.createBuffer(1, 1, this.ctx.sampleRate);\n            const src = this.ctx.createBufferSource();\n            src.buffer = buffer;\n            src.connect(this.masterGain);\n            src.start(0);\n            // Start keep-alive loop to guard against browsers auto-suspending inactive contexts\n            this.startKeepAlive();\n            this.prepareFallbackElement();\n        }\n        catch (e) {\n            console.warn('Audio init failed', e);\n            this.enabled = false;\n            this.lastError = e;\n        }\n    }\n    setDebug(on) { this.debug = on; }\n    setEnabled(on) {\n        this.enabled = on;\n        if (this.masterGain)\n            this.masterGain.gain.value = on ? 0.6 : 0;\n        if (on)\n            this.confirm();\n    }\n    toggle() { this.setEnabled(!this.enabled); return this.enabled; }\n    status() { return { started: this.started, enabled: this.enabled, ctxState: this.ctx?.state, sampleRate: this.ctx?.sampleRate, suspended: this.ctx?.state === 'suspended', playCount: this.playCount, lastError: this.lastError ? String(this.lastError) : null }; }\n    logAttempt(label) { if (this.debug)\n        console.log('[Audio] play attempt', label, this.status()); }\n    autoInit() { if (!this.started) {\n        if (this.debug)\n            console.log('[Audio] autoInit attempt');\n        this.init();\n    } }\n    ensureContext() {\n        if (!this.ctx || this.ctx.state === 'closed') {\n            if (this.reinitAttempts < this.maxReinit) {\n                this.reinitAttempts++;\n                if (this.debug)\n                    console.warn('[Audio] context missing/closed – reinitializing attempt', this.reinitAttempts);\n                this.started = false; // force init path\n                this.init();\n            }\n            else if (this.debug) {\n                console.error('[Audio] max reinit attempts reached');\n            }\n        }\n    }\n    prepareFallbackElement() {\n        if (this.fallbackAudioEl)\n            return;\n        // 200ms 440Hz sine encoded as small wav (base64). Not critical fidelity.\n        const wavBase64 = 'data:audio/wav;base64,UklGRjQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAAA';\n        try {\n            this.fallbackAudioEl = new Audio(wavBase64);\n            this.fallbackAudioEl.preload = 'auto';\n        }\n        catch { }\n    }\n    fallbackBeep(label) {\n        if (!this.fallbackAudioEl)\n            return;\n        try {\n            this.fallbackAudioEl.currentTime = 0;\n            this.fallbackAudioEl.play().then(() => {\n                if (this.debug)\n                    console.log('[Audio] fallback beep played', label);\n            }).catch(err => {\n                if (this.debug)\n                    console.warn('[Audio] fallback beep failed', err);\n            });\n        }\n        catch (e) {\n            if (this.debug)\n                console.warn('[Audio] fallback beep exception', e);\n        }\n    }\n    installLifecycleHandlers() {\n        const resume = () => { try {\n            if (this.ctx && this.ctx.state === 'suspended') {\n                this.ctx.resume();\n                if (this.debug)\n                    console.log('[Audio] visibility/focus resume');\n            }\n        }\n        catch { } };\n        document.addEventListener('visibilitychange', () => { if (!document.hidden)\n            resume(); });\n        window.addEventListener('focus', resume);\n        window.addEventListener('pageshow', resume);\n    }\n    startKeepAlive() {\n        if (this.keepAliveId != null)\n            return;\n        this.keepAliveId = window.setInterval(() => {\n            if (!this.ctx)\n                return;\n            if (this.ctx.state === 'suspended') {\n                this.ctx.resume().catch(() => { });\n                if (this.debug)\n                    console.log('[Audio] keepAlive resume attempted', this.status());\n            }\n        }, 4000);\n    }\n    playTone(opts) {\n        this.autoInit();\n        this.ensureContext();\n        if (!this.enabled) {\n            if (this.debug)\n                console.warn('[Audio] skip play (disabled)', opts.__label);\n            return;\n        }\n        if (!this.ctx || !this.masterGain) {\n            if (this.debug)\n                console.warn('[Audio] skip play (no ctx/masterGain)', opts.__label, this.status());\n            return;\n        }\n        if (this.ctx.state === 'suspended') {\n            this.ctx.resume().catch(() => { });\n            if (this.debug)\n                console.log('[Audio] resume before play', this.status());\n        }\n        this.logAttempt(opts.__label || 'tone');\n        const { freq = 440, type = 'sine', duration = 0.25, volume = 0.6, attack = 0.005, release = 0.12, sweepTo } = opts;\n        try {\n            const osc = this.ctx.createOscillator();\n            const gain = this.ctx.createGain();\n            osc.type = type;\n            osc.frequency.value = freq;\n            if (sweepTo && sweepTo !== freq) {\n                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);\n                osc.frequency.exponentialRampToValueAtTime(Math.max(30, sweepTo), this.ctx.currentTime + duration);\n            }\n            gain.gain.setValueAtTime(0, this.ctx.currentTime);\n            gain.gain.linearRampToValueAtTime(volume, this.ctx.currentTime + attack);\n            gain.gain.linearRampToValueAtTime(0, this.ctx.currentTime + duration + release);\n            osc.connect(gain).connect(this.masterGain);\n            osc.start();\n            osc.stop(this.ctx.currentTime + duration + release + 0.02);\n            this.playCount++;\n            if (this.debug)\n                console.log('[Audio] play ok', opts.__label, 'count=', this.playCount);\n            // If still early (first few plays) and user hasn't heard anything, fallback beep can layer (optional) – only when count < 2\n            if (this.playCount < 2)\n                this.fallbackBeep(opts.__label);\n        }\n        catch (err) {\n            this.lastError = err;\n            if (this.debug)\n                console.error('[Audio] play error', opts.__label, err);\n            this.fallbackBeep(opts.__label);\n        }\n    }\n    // Semantic sound wrappers\n    collectFood() { this.playTone({ freq: 540, type: 'triangle', duration: 0.18, sweepTo: 760, __label: 'collectFood' }); }\n    collectFitness() { this.playTone({ freq: 380, type: 'sawtooth', duration: 0.22, sweepTo: 200, __label: 'collectFitness' }); }\n    refresh() { this.playTone({ freq: 260, type: 'square', duration: 0.16, sweepTo: 520, __label: 'refresh' }); }\n    dayStart() { this.playTone({ freq: 330, type: 'triangle', duration: 0.25, sweepTo: 660, __label: 'dayStart' }); }\n    dayEndPositive() { this.playTone({ freq: 480, type: 'sine', duration: 0.22, sweepTo: 720, __label: 'dayEndPositive' }); }\n    dayEndNegative() { this.playTone({ freq: 180, type: 'sine', duration: 0.35, sweepTo: 90, __label: 'dayEndNegative' }); }\n    disease() { this.playTone({ freq: 120, type: 'square', duration: 0.4, sweepTo: 70, __label: 'disease' }); }\n    death() { this.playTone({ freq: 70, type: 'sawtooth', duration: 0.7, sweepTo: 40, __label: 'death' }); }\n    warning() { this.playTone({ freq: 260, type: 'square', duration: 0.18, __label: 'warning' }); }\n    confirm() { this.playTone({ freq: 750, type: 'sine', duration: 0.08, sweepTo: 900, volume: 0.4, __label: 'confirm' }); }\n    testPing() { this.playTone({ freq: 600, type: 'square', duration: 0.15, sweepTo: 500, volume: 0.5, __label: 'testPing' }); }\n    // Alternate buffer-based test (rules out oscillator issues)\n    __bufferTest() {\n        this.autoInit();\n        this.ensureContext();\n        if (!this.ctx || !this.masterGain) {\n            if (this.debug)\n                console.warn('[Audio] bufferTest no ctx');\n            return;\n        }\n        try {\n            const sr = this.ctx.sampleRate;\n            const len = Math.floor(sr * 0.25);\n            const buffer = this.ctx.createBuffer(1, len, sr);\n            const data = buffer.getChannelData(0);\n            // Simple sine 660 Hz with fade in/out\n            for (let i = 0; i < len; i++) {\n                const t = i / sr;\n                const env = Math.min(1, t / 0.01) * Math.min(1, (0.25 - t) / 0.05);\n                data[i] = Math.sin(2 * Math.PI * 660 * t) * env * 0.5;\n            }\n            const src = this.ctx.createBufferSource();\n            src.buffer = buffer;\n            src.connect(this.masterGain);\n            src.start();\n            this.playCount++;\n            if (this.debug)\n                console.log('[Audio] bufferTest ok count=', this.playCount);\n        }\n        catch (e) {\n            this.lastError = e;\n            if (this.debug)\n                console.error('[Audio] bufferTest error', e);\n            this.fallbackBeep('bufferTest');\n        }\n    }\n}\nexport const audioManager = new AudioManager();\n;\nwindow.audioManager = audioManager; // expose for console debugging\n//# sourceMappingURL=audio.js.map","import { clamp, evalExpression } from './utils';\nimport { audioManager } from './audio';\nexport class Game {\n    constructor(data) {\n        Object.defineProperty(this, \"data\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"selectedFoods\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"selectedFitness\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"dayLog\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"hardshipFactor\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1.0\n        }); // 1.0 = normal; >1 harder (more decay, less income), <1 easier\n        this.data = data;\n        this.state = this.initState();\n    }\n    initState() {\n        const st = this.data.playerStats;\n        return {\n            ...st,\n            day: 1,\n            streakHealthyMeals: 0,\n            history: { sugar: [], cholesterol: [], sodium: [] },\n            activeDiseases: [],\n            blockedWork: false\n        };\n    }\n    getLog() { return this.dayLog.join('\\n'); }\n    pushLog(line) { this.dayLog.push(line); }\n    resetDayLog() { this.dayLog = []; }\n    setHardshipFactor(f) {\n        if (f < 0.25)\n            f = 0.25;\n        else if (f > 3)\n            f = 3; // clamp safety\n        this.hardshipFactor = Number(f.toFixed(2));\n        this.pushLog(`Hardship factor set to ${this.hardshipFactor}x`);\n    }\n    setFood(foods) {\n        if (Array.isArray(foods)) {\n            this.selectedFoods = foods;\n        }\n        else {\n            this.selectedFoods = [foods];\n        }\n    }\n    setFitness(action) { this.selectedFitness = action; }\n    // Job system removed for simplicity\n    nextDay() {\n        this.resetDayLog();\n        this.pushLog(`--- Day ${this.state.day} ---`);\n        // Sequence: eat -> fitness -> work -> disease check -> end\n        this.eatPhase();\n        this.fitnessPhase();\n        this.workPhase();\n        this.diseaseCheckPhase();\n        this.endOfDay();\n        this.state.day++;\n    }\n    applyFoodEffects(food) {\n        const s = this.state;\n        s.energy += food.energy;\n        s.vitamins += food.vitamins;\n        s.protein += food.protein;\n        s.sugar += food.sugar;\n        s.cholesterol += food.cholesterol;\n        s.sodium += food.sodium;\n        s.mood += food.mood;\n        s.fitness += food.fitness;\n        if (food.minerals)\n            s.minerals += food.minerals;\n        s.money -= food.price;\n    }\n    eatPhase() {\n        if (!this.selectedFoods.length) {\n            this.pushLog('No food selected.');\n            return;\n        }\n        let healthyCount = 0;\n        this.selectedFoods.forEach(food => {\n            this.pushLog(`Eating: ${food.name}`);\n            this.applyFoodEffects(food);\n            // Healthy meal heuristic: low sugar & cholesterol & some vitamins\n            const healthy = food.sugar <= 3 && food.cholesterol <= 2 && food.vitamins >= 3;\n            if (healthy)\n                healthyCount++;\n        });\n        if (healthyCount === this.selectedFoods.length && healthyCount > 0) {\n            this.state.streakHealthyMeals++;\n            this.pushLog(`Healthy meal streak: ${this.state.streakHealthyMeals}`);\n        }\n        else {\n            this.state.streakHealthyMeals = 0;\n        }\n    }\n    fitnessPhase() {\n        if (!this.selectedFitness) {\n            this.pushLog('No fitness action selected.');\n            return;\n        }\n        const act = this.selectedFitness;\n        this.pushLog(`Fitness: ${act.action}`);\n        this.state.money -= act.cost;\n        this.state.energy += act.energyChange;\n        this.state.fitness += act.fitnessChange;\n        this.state.mood += act.moodChange;\n    }\n    workPhase() {\n        if (this.state.blockedWork) {\n            this.pushLog('Unable to work due to a condition.');\n            return;\n        }\n        const { economy } = this.data;\n        const context = { ...this.state, baseIncome: economy.baseIncome, fitness: this.state.fitness, energy: this.state.energy };\n        let income = evalExpression(economy.incomeFormula.split('=')[1].trim(), context);\n        if (this.state.mood < 25)\n            income *= economy.lowMoodPenalty;\n        else\n            income += income * economy.moodBonus * (this.state.mood / 100);\n        const healthyStats = ['vitamins', 'minerals', 'protein'].filter(k => this.state[k] >= 60).length;\n        const healthBonus = evalExpression(economy.healthBonusFormula.replace('healthyStats', healthyStats.toString()), { healthyStats });\n        income *= healthBonus;\n        const fitness = clamp(this.state.fitness, 0, 100);\n        const fitnessMultiplier = 0.5 + (fitness / 100) * 0.7;\n        income *= fitnessMultiplier;\n        this.pushLog(`Fitness multiplier applied: x${fitnessMultiplier.toFixed(2)}`);\n        if (this.state.streakHealthyMeals >= 3 && this.state.fitness >= 70) {\n            income += economy.peakBonus;\n            this.pushLog('Peak condition bonus applied.');\n        }\n        for (const d of this.state.activeDiseases) {\n            if (d.effect.incomeMultiplier !== undefined)\n                income *= d.effect.incomeMultiplier;\n            if (d.effect.money)\n                income += d.effect.money;\n        }\n        // Hardship: income reduced by factor (>1 harder => less income). Inverse scaling.\n        income = income / this.hardshipFactor;\n        income = Math.max(0, Math.round(income));\n        this.pushLog(`Income earned: ${income}`);\n        this.state.money += income;\n    }\n    diseaseCheckPhase() {\n        const s = this.state;\n        const hist = s.history;\n        hist.sugar.push(s.sugar);\n        if (hist.sugar.length > 5)\n            hist.sugar.shift();\n        hist.cholesterol.push(s.cholesterol);\n        if (hist.cholesterol.length > 5)\n            hist.cholesterol.shift();\n        hist.sodium.push(s.sodium);\n        if (hist.sodium.length > 5)\n            hist.sodium.shift();\n        const triggered = [];\n        for (const disease of this.data.diseases) {\n            if (s.activeDiseases.find(d => d.name === disease.name))\n                continue; // already active\n            const trig = disease.trigger;\n            let ok = false;\n            if (trig.includes('sugar > 110')) {\n                ok = hist.sugar.slice(-3).every(v => v > 110);\n            }\n            else if (trig.includes('cholesterol > 110')) {\n                ok = hist.cholesterol.slice(-2).every(v => v > 110);\n            }\n            else if (trig.includes('sodium > 110')) {\n                ok = hist.sodium.slice(-3).every(v => v > 110);\n            }\n            else if (trig.includes('energy < 20')) {\n                ok = s.energy < 20;\n            }\n            else if (trig.includes('mood < 25')) {\n                ok = s.mood < 25;\n            }\n            if (ok) {\n                triggered.push(disease);\n                s.activeDiseases.push(disease);\n                if (disease.effect.canWork === false)\n                    s.blockedWork = true;\n            }\n        }\n        for (const d of triggered) {\n            this.pushLog(`Disease triggered: ${d.name}`);\n            // immediate effects (non-income ones): energy, money, mood\n            if (d.effect.energy)\n                s.energy += d.effect.energy;\n            if (d.effect.mood)\n                s.mood += d.effect.mood;\n            if (d.effect.money)\n                s.money += d.effect.money;\n        }\n        if (triggered.length) {\n            audioManager.disease();\n        }\n    }\n    endOfDay() {\n        const decay = this.data.gameRules.rules.statDecay;\n        for (const [k, v] of Object.entries(decay)) {\n            const scaled = v * this.hardshipFactor; // v is negative so harder => more negative\n            this.state[k] += scaled;\n        }\n        // Apply cross-stat health adjustments before clamping\n        this.adjustHealth();\n        // Clamp\n        const lim = this.data.gameRules.rules.statLimits;\n        const clampKeys = ['energy', 'fitness', 'mood', 'vitamins', 'minerals', 'protein', 'sugar', 'cholesterol', 'sodium', 'health'];\n        for (const k of clampKeys) {\n            const maxMap = { energy: lim.energyMax, fitness: lim.fitnessMax, mood: lim.moodMax, health: lim.healthMax };\n            const max = maxMap[k] ?? lim.max;\n            this.state[k] = clamp(this.state[k], lim.min, max);\n        }\n        // Death roll: below 50 health there is a growing chance to die\n        this.evaluateDeath();\n        this.pushLog('End of day: stats decayed & clamped.');\n    }\n    // Cross-stat health logic: penalize extremes, reward balance.\n    // Heuristics (can be externalized later):\n    //  - Severe deficiency (vitamins/minerals/protein < 20) => -4 each\n    //  - Mild deficiency (< 40) => -2 each\n    //  - Balanced trio (all >= 60) => +3 bonus\n    //  - Excess sugar/cholesterol/sodium: 100-109 => -2 each, 110+ => -5 each\n    //  - Very low energy (< 25) => -3; critical (< 15) => -6 (replaces the -3)\n    //  - Very low mood (< 25) => -3; critical (< 15) => -6 (replaces the -3)\n    //  - Good fitness (>= 70) & good mood (>= 60) & energy (>= 60) => +2 synergy\n    //  - Healthy meal streak (>=3) => +2\n    //  - Cap net daily health change to [-12, +8]\n    adjustHealth() {\n        const s = this.state;\n        let delta = 0;\n        const add = (d) => { delta += d; };\n        // Macro / micro nutrients\n        for (const k of ['vitamins', 'minerals', 'protein']) {\n            const v = s[k];\n            if (v < 20)\n                add(-4);\n            else if (v < 40)\n                add(-2);\n        }\n        if (['vitamins', 'minerals', 'protein'].every(k => s[k] >= 60))\n            add(3);\n        // Excess markers\n        for (const k of ['sugar', 'cholesterol', 'sodium']) {\n            const v = s[k];\n            if (v >= 110)\n                add(-5);\n            else if (v >= 100)\n                add(-2);\n        }\n        // Energy & mood low penalties\n        if (s.energy < 15)\n            add(-6);\n        else if (s.energy < 25)\n            add(-3);\n        if (s.mood < 15)\n            add(-6);\n        else if (s.mood < 25)\n            add(-3);\n        // Positive synergy for good condition\n        if (s.fitness >= 70 && s.mood >= 60 && s.energy >= 60)\n            add(2);\n        if (s.streakHealthyMeals >= 3)\n            add(2);\n        // Bound total daily delta\n        if (delta < -12)\n            delta = -12;\n        else if (delta > 8)\n            delta = 8;\n        if (delta !== 0) {\n            s.health += delta;\n            this.pushLog(`Health adjusted by ${delta} from cross-stat factors.`);\n        }\n        else {\n            this.pushLog('Health unchanged by cross-stat factors.');\n        }\n    }\n    evaluateDeath() {\n        const s = this.state;\n        if (s.isDead)\n            return; // already dead\n        if (s.health >= 50)\n            return; // no death checks above this threshold\n        // Probability scales: health 49 => 2% .. health 0 => 90%\n        const chance = Math.min(0.9, 0.02 + ((50 - s.health) / 50) * 0.88); // 0.02 to ~0.90\n        const roll = Math.random();\n        this.pushLog(`Death check: health=${s.health} chance=${(chance * 100).toFixed(1)}% roll=${(roll * 100).toFixed(1)}%`);\n        if (roll < chance) {\n            s.isDead = true;\n            s.deathReason = this.deriveDeathReason();\n            this.pushLog(`YOU DIED: ${s.deathReason}`);\n            audioManager.death();\n        }\n    }\n    deriveDeathReason() {\n        const s = this.state;\n        // Simple heuristic: pick the worst offending stat extremes\n        const issues = [];\n        if (s.sugar > 115)\n            issues.push('Complications from high sugar');\n        if (s.cholesterol > 115)\n            issues.push('Cardiovascular failure');\n        if (s.sodium > 115)\n            issues.push('Hypertensive crisis');\n        if (s.energy < 10)\n            issues.push('Systemic exhaustion');\n        if (s.mood < 10)\n            issues.push('Severe depressive collapse');\n        if (issues.length === 0)\n            return 'Health failure';\n        return issues[0];\n    }\n}\n//# sourceMappingURL=game.js.map","// --- Stat Icons & Ordering ---\nconst STAT_ICONS = {\n    health: '❤️', money: '💰', energy: '⚡', fitness: '💪', mood: '😊',\n    minerals: '🪨', sugar: '🍬', sodium: '🧂', vitamins: '💊', protein: '🥚', cholesterol: '🫀'\n};\nconst ROW1 = ['health', 'money', 'energy', 'fitness', 'mood'];\nconst ROW2 = ['minerals', 'sugar', 'sodium', 'vitamins', 'protein', 'cholesterol'];\nlet previousStats = null;\n// Threshold configuration:\n// We treat values below MIN_WARN_PCT of their max (where applicable) or below global min as danger/warning.\n// Likewise values above HIGH_WARN_PCT of their max for stats that have an upper concern (sugar, cholesterol, sodium) trigger warnings, and above HIGH_DANGER_ABS trigger danger.\n// Health-specific: danger if < 30, warning if < 50.\n// Money: warning if < 15, danger if < 5 (liquidity risk for affording food/fitness).\n// These heuristics can be tuned without touching render logic.\nconst LOW_DANGER_PCT = 0.15; // 15% of max\nconst LOW_WARNING_PCT = 0.30; // 30% of max\nconst HIGH_WARNING_ABS = 105; // near cap but not quite over-limit (since clamp max 120)\nconst HIGH_DANGER_ABS = 115; // critical high (approaching hard clamp 120)\nconst MONEY_WARNING = 15;\nconst MONEY_DANGER = 5;\nconst HEALTH_WARNING = 50;\nconst HEALTH_DANGER = 30;\nfunction classifyStat(name, value, game) {\n    const limits = game.data.gameRules.rules.statLimits;\n    // Determine max per stat\n    const maxMap = {\n        energy: limits.energyMax,\n        fitness: limits.fitnessMax,\n        mood: limits.moodMax,\n        health: limits.healthMax\n    };\n    const max = maxMap[name] ?? limits.max;\n    const min = limits.min;\n    // Health custom\n    if (name === 'health') {\n        if (value <= HEALTH_DANGER)\n            return { cls: 'danger' };\n        if (value <= HEALTH_WARNING)\n            return { cls: 'warning' };\n        return { cls: '' };\n    }\n    // Money custom (not clamped by max but we only care about low end)\n    if (name === 'money') {\n        if (value <= MONEY_DANGER)\n            return { cls: 'danger' };\n        if (value <= MONEY_WARNING)\n            return { cls: 'warning' };\n        return { cls: '' };\n    }\n    // For nutrients where high is bad: sugar, cholesterol, sodium\n    if (['sugar', 'cholesterol', 'sodium'].includes(name)) {\n        if (value >= HIGH_DANGER_ABS)\n            return { cls: 'danger' };\n        if (value >= HIGH_WARNING_ABS)\n            return { cls: 'warning' };\n        // Also low-end depletion can matter (treat like generic low logic)\n    }\n    // Generic low thresholds using percentage of max\n    const pct = value / max;\n    if (value <= min + (max * LOW_DANGER_PCT))\n        return { cls: 'danger' };\n    if (pct <= LOW_WARNING_PCT)\n        return { cls: 'warning' };\n    return { cls: '' };\n}\nexport function qs(sel) {\n    const el = document.querySelector(sel);\n    if (!el)\n        throw new Error(`Missing element ${sel}`);\n    return el;\n}\nexport function appendLog(msg) {\n    // Log element removed; fallback to console for debugging.\n    if (typeof console !== 'undefined')\n        console.log('[Game]', msg);\n}\nfunction statDelta(key, current) {\n    if (!previousStats)\n        return '';\n    const prev = previousStats[key];\n    if (prev === undefined)\n        return '';\n    const diff = current - prev;\n    if (diff === 0)\n        return '';\n    const sign = diff > 0 ? '▲' : '▼';\n    const cls = diff > 0 ? 'up' : 'down';\n    return `<span class=\"delta ${cls}\" aria-hidden=\"true\">${sign}${Math.abs(Math.round(diff))}</span>`;\n}\nexport function renderStats(game) {\n    const container = qs('#stats');\n    container.innerHTML = '';\n    const makeBar = (keys, nutrient = false, inline = false) => {\n        const bar = document.createElement('div');\n        bar.className = 'stats-bar' + (nutrient ? ' nutrient-bar' : '');\n        keys.forEach(k => {\n            const rawVal = game.state[k];\n            const val = Math.round(rawVal);\n            const highlight = classifyStat(k, val, game);\n            const seg = document.createElement('span');\n            seg.className = 'stat-seg' + (highlight.cls ? ' ' + highlight.cls : '') + ((nutrient || inline) ? ' nutrient' : '');\n            seg.setAttribute('data-stat', k);\n            seg.title = k.charAt(0).toUpperCase() + k.slice(1);\n            if (nutrient || inline) {\n                seg.innerHTML = `<span class=\"i\" aria-label=\"${k}\">${STAT_ICONS[k] || k} <span class=\"v inline\">${val}</span></span>${statDelta(k, val)}`;\n            }\n            else {\n                seg.innerHTML = `<span class=\"i\" aria-label=\"${k}\">${STAT_ICONS[k] || k}</span><span class=\"v\">${val}</span>${statDelta(k, val)}`;\n            }\n            bar.appendChild(seg);\n        });\n        return bar;\n    };\n    // First row: non-food stats (core condition & resources)\n    container.appendChild(makeBar(ROW1, false, true));\n    // Second row: food-related nutrient & risk stats\n    container.appendChild(makeBar(ROW2, true));\n    attachStatBubbleTooltips(container);\n}\nexport function snapshotStatsForNextTurn(game) {\n    previousStats = {};\n    [...ROW1, ...ROW2].forEach(k => previousStats[k] = game.state[k]);\n}\n// Provide a convenience to update snapshot + render.\nexport function updateStatsView(game) {\n    renderStats(game);\n    // Do not refresh snapshot here; caller sets snapshot before advancing day.\n}\nexport function updateDaysSurvived(game) {\n    try {\n        const el = document.getElementById('daysSurvived');\n        if (el) {\n            const label = el.querySelector('.label');\n            if (label)\n                label.textContent = `Day ${game.state.day}`;\n        }\n    }\n    catch { }\n}\nexport function getPreviousStat(stat) {\n    if (!previousStats)\n        return null;\n    return previousStats[stat] ?? null;\n}\nexport function updatePenaltyLog(game) {\n    const container = document.getElementById('penaltyLog');\n    if (!container)\n        return;\n    const raw = game.getLog().split(/\\n+/).filter(l => l.trim().length);\n    // We will group all Eating lines within each Day block into a single summarized line.\n    // The original lines are replaced by: \"Eating: <emoji list>\" where emoji are extracted from the food names when possible.\n    const dayHeaderRe = /^---\\s*Day\\s+\\d+\\s*---$/i;\n    const eatingRe = /^Eating:\\s*(.+)$/i;\n    const fitnessRe = /^Fitness:\\s*(.+)$/i; // left intact (still grouped consecutively later if needed).\n    const emojiRe = /([\\p{Emoji_Presentation}\\p{Extended_Pictographic}])/u; // heuristic single emoji capture\n    const rebuilt = [];\n    let current = null;\n    const pushCurrent = () => {\n        if (!current)\n            return;\n        // Insert summarized Eating line (if any collected) before other non-eating lines that followed.\n        const other = current.lines.filter(l => !/^Eating:/i.test(l));\n        if (current.eatItems.length) {\n            // Extract emoji or fallback to name; de-duplicate sequence preserving order\n            const seen = new Set();\n            const display = current.eatItems.map(name => {\n                const m = name.match(emojiRe);\n                const token = m ? m[1] : name; // fallback full name\n                if (seen.has(token))\n                    return null;\n                seen.add(token);\n                return token;\n            }).filter(Boolean);\n            rebuilt.push(`Eating: ${display.join(', ')}`);\n        }\n        // Append remaining lines (except original Eating lines which were summarized)\n        rebuilt.push(...other);\n        current = null;\n    };\n    for (const line of raw) {\n        if (dayHeaderRe.test(line)) {\n            // Flush previous block\n            pushCurrent();\n            // Start new block & emit its header\n            rebuilt.push(line.replace(/^---\\s*/, '').trim()); // keep style similar to earlier stripping\n            current = { header: line, lines: [], eatItems: [] };\n            continue;\n        }\n        const eat = line.match(eatingRe);\n        if (eat && current) {\n            current.eatItems.push(eat[1].trim());\n            // Do not store original Eating line in lines (we summarize)\n            continue;\n        }\n        // Any other line\n        if (current)\n            current.lines.push(line);\n        else\n            rebuilt.push(line);\n    }\n    pushCurrent();\n    // Keep only latest ~40 logical lines after rebuild\n    const limited = rebuilt.slice(-40);\n    const classify = (line) => {\n        if (/Health adjusted by -/.test(line) || /Disease triggered/i.test(line) || /Unable to work/i.test(line))\n            return 'penalty';\n        if (/Health adjusted by \\+/.test(line) || /bonus applied/i.test(line))\n            return 'bonus';\n        if (/Day \\d+/.test(line))\n            return 'day';\n        return 'neutral';\n    };\n    container.innerHTML = limited.map(l => `<div class=\"line ${classify(l)}\">${l.replace(/^---\\s*/, '')}</div>`).join('');\n    container.scrollTop = container.scrollHeight;\n}\n// --- Touch / click tooltip bubble (for mobile) ---\nlet activeBubble = null;\nfunction attachStatBubbleTooltips(container) {\n    const stats = container.querySelectorAll('.stat-seg');\n    stats.forEach(stat => {\n        stat.addEventListener('click', (e) => {\n            e.stopPropagation();\n            const name = (stat.getAttribute('data-stat') || '').trim();\n            showBubble(stat, name.charAt(0).toUpperCase() + name.slice(1));\n        }, { passive: true });\n        stat.addEventListener('touchstart', (e) => {\n            e.stopPropagation();\n            const name = (stat.getAttribute('data-stat') || '').trim();\n            showBubble(stat, name.charAt(0).toUpperCase() + name.slice(1));\n        }, { passive: true });\n    });\n    document.addEventListener('click', dismissBubble, { once: true });\n    document.addEventListener('touchstart', dismissBubble, { once: true });\n}\nfunction showBubble(anchor, text) {\n    dismissBubble();\n    const bubble = document.createElement('div');\n    bubble.className = 'stat-tooltip-bubble';\n    bubble.textContent = text;\n    document.body.appendChild(bubble);\n    const rect = anchor.getBoundingClientRect();\n    const bw = bubble.offsetWidth;\n    const bh = bubble.offsetHeight;\n    bubble.style.left = `${rect.left + rect.width / 2 - bw / 2}px`;\n    bubble.style.top = `${rect.top - bh - 8}px`;\n    activeBubble = bubble;\n}\nfunction dismissBubble() {\n    if (activeBubble && activeBubble.parentNode)\n        activeBubble.parentNode.removeChild(activeBubble);\n    activeBubble = null;\n}\n//# sourceMappingURL=ui.js.map","import { qs, appendLog, updateStatsView, snapshotStatsForNextTurn, updateDaysSurvived, updatePenaltyLog, getPreviousStat } from './ui';\nimport { audioManager } from './audio';\nconst GRID_ROWS = 3;\nconst GRID_COLS = 4; // number of selectable columns\n// Default day duration (ms) will be configurable via welcome screen\nexport class DailyRunMinigame {\n    constructor(game, dayDurationMs = 5000) {\n        Object.defineProperty(this, \"game\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"grid\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"playerCol\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"timer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"remaining\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        }); // initialized on startDay using current dayDurationMs\n        Object.defineProperty(this, \"foodsCollected\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"fitnessChosen\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: null\n        });\n        Object.defineProperty(this, \"running\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lastTick\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"dayCounter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        }); // local counter to label rows\n        Object.defineProperty(this, \"paused\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        // Allow one bottom-row option refresh per day via arrow cell\n        Object.defineProperty(this, \"bottomRefreshed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"dayDurationMs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        }); // configurable length of a day selection window\n        this.game = game;\n        this.dayDurationMs = dayDurationMs;\n        this.initEmptyGrid();\n        this.randomizeTopRows(GRID_ROWS); // initial fill\n        this.playerCol = Math.floor(GRID_COLS / 2);\n        this.render();\n        this.bindControls();\n        // Note: day will start only when startDay() is explicitly invoked (welcome screen flow)\n    }\n    /**\n     * Update the day duration (in seconds) for subsequent days. If a day is currently\n     * running, the change will take effect on the next day start.\n     */\n    setDayDurationSeconds(seconds) {\n        const ms = Math.round(seconds * 1000);\n        if (ms < 1000)\n            return; // ignore unrealistic\n        this.dayDurationMs = ms;\n    }\n    initEmptyGrid() {\n        this.grid = Array.from({ length: GRID_ROWS }, () => Array.from({ length: GRID_COLS }, () => ({ type: 'empty', emoji: '' })));\n    }\n    // Helper to shuffle array\n    shuffle(arr) {\n        for (let i = arr.length - 1; i > 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            const tmp = arr[i];\n            arr[i] = arr[j];\n            arr[j] = tmp;\n        }\n        return arr;\n    }\n    // Remove 'overeat' from fitness actions\n    getFitnessActions() {\n        // Only offer the \"Go to Gym\" action. Absence of collecting it = skipped exercise.\n        return this.game.data.fitnessActions.filter(f => /go to gym/i.test(f.action));\n    }\n    // Generate a row sized to GRID_COLS (3 foods + optional fitness or 4 foods)\n    generateRow() {\n        const foods = this.shuffle([...this.game.data.foods]);\n        const gym = this.getFitnessActions()[0];\n        const includeGym = Math.random() < 0.55 && !!gym; // slightly lower chance with fewer columns\n        let baseFoods = foods.slice(0, includeGym ? 3 : 4);\n        const items = baseFoods.map(food => ({ type: 'food', food, emoji: this.extractEmoji(food.name) }));\n        if (includeGym && gym)\n            items.push({ type: 'fitness', fitness: gym, emoji: gym.action.split(' ').slice(-1)[0] });\n        return this.shuffle(items).slice(0, GRID_COLS);\n    }\n    extractEmoji(name) {\n        const parts = name.trim().split(/\\s+/);\n        const last = parts[parts.length - 1];\n        if (/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/u.test(last))\n            return last;\n        return '❔';\n    }\n    randomizeTopRows(count) {\n        for (let i = 0; i < count; i++) {\n            this.grid[i] = this.generateRow();\n        }\n    }\n    shiftDownAndAddRow() {\n        for (let r = GRID_ROWS - 1; r > 0; r--) {\n            this.grid[r] = this.grid[r - 1];\n        }\n        // new row at top\n        this.grid[0] = this.generateRow();\n    }\n    startDay() {\n        if (this.running)\n            return;\n        // Allow either explicit allow flag OR persisted start flag as recovery path\n        if (!window.__WQ_ALLOW_START && !localStorage.getItem('wq.started.v1')) {\n            console.info('[DailyRunMinigame] startDay blocked (no allow flag & no persisted start flag)');\n            return;\n        }\n        this.running = true;\n        try {\n            if (!localStorage.getItem('wq.started.v1')) {\n                localStorage.setItem('wq.started.v1', '1');\n                console.log('[WelcomeOverlay] Flag set from startDay');\n            }\n        }\n        catch { }\n        const overlay = document.getElementById('welcomeOverlay');\n        // Only remove intro overlay if the user explicitly pressed Start (prevents unintended flashing removal)\n        if (overlay) {\n            if (window.__WQ_USER_START) {\n                overlay.remove();\n                console.log('[WelcomeOverlay] Removed from startDay (explicit user start)');\n            }\n            else {\n                console.log('[WelcomeOverlay] Overlay present but preserved (no explicit user start flag)');\n            }\n        }\n        this.dayCounter++; // increment at each new day start\n        this.foodsCollected = [];\n        this.fitnessChosen = null;\n        this.remaining = this.dayDurationMs;\n        this.lastTick = performance.now();\n        this.bottomRefreshed = false; // reset daily arrow usage\n        // Re-render so the arrow visually resets to ▶ before ticking resumes\n        this.render();\n        // Reset day progress bar\n        const badge = document.getElementById('daysSurvived');\n        if (badge) {\n            const prog = badge.querySelector('.progress');\n            if (prog)\n                prog.style.width = '0%';\n        }\n        // Snapshot stats at the start of the day (baseline for delta arrows)\n        snapshotStatsForNextTurn(this.game);\n        audioManager.dayStart();\n        this.tick();\n    }\n    tick() {\n        if (!this.running)\n            return;\n        if (this.game.state.isDead) {\n            this.running = false;\n            return;\n        }\n        if (this.paused) {\n            requestAnimationFrame(() => this.tick());\n            return;\n        }\n        const now = performance.now();\n        const dt = now - this.lastTick;\n        this.lastTick = now;\n        this.remaining -= dt;\n        // Update progress bar width (invert remaining to elapsed)\n        const badge = document.getElementById('daysSurvived');\n        if (badge) {\n            const prog = badge.querySelector('.progress');\n            if (prog) {\n                const elapsed = this.dayDurationMs - this.remaining;\n                const frac = Math.min(1, Math.max(0, elapsed / this.dayDurationMs));\n                prog.style.width = (frac * 100).toFixed(2) + '%';\n            }\n        }\n        if (this.remaining <= 0) {\n            this.endDay();\n            return;\n        }\n        // Removed auto-loop restart to prevent skipping intro\n        requestAnimationFrame(() => this.tick());\n    }\n    // Removed countdown display function\n    endDay() {\n        this.running = false;\n        // Apply collected items to game then process day\n        if (this.foodsCollected.length)\n            this.game.setFood(this.foodsCollected);\n        if (this.fitnessChosen)\n            this.game.setFitness(this.fitnessChosen);\n        const prevHealth = getPreviousStat('health');\n        this.game.nextDay();\n        appendLog(this.game.getLog());\n        // Update stats view to show deltas vs baseline captured at startDay\n        updateStatsView(this.game);\n        updatePenaltyLog(this.game);\n        updateDaysSurvived(this.game);\n        // Trigger day badge animation\n        const badge = document.getElementById('daysSurvived');\n        if (badge) {\n            badge.classList.remove('animate-day');\n            // force reflow to restart animation\n            void badge.offsetWidth;\n            badge.classList.add('animate-day');\n            // Fill bar to 100% at end just before transition\n            const prog = badge.querySelector('.progress');\n            if (prog)\n                prog.style.width = '100%';\n        }\n        if (this.game.state.isDead) {\n            // death sound already from game, ensure anyway\n            audioManager.death();\n            this.showGameOver();\n            return;\n        }\n        if (prevHealth != null) {\n            const newHealth = this.game.state.health;\n            if (newHealth > prevHealth)\n                audioManager.dayEndPositive();\n            else if (newHealth < prevHealth)\n                audioManager.dayEndNegative();\n        }\n        this.animateShiftWithNewRow();\n    }\n    showGameOver() {\n        const gridEl = qs('#gameGrid');\n        const overlay = document.createElement('div');\n        overlay.style.position = 'absolute';\n        overlay.style.inset = '0';\n        overlay.style.background = 'radial-gradient(circle at 50% 40%, rgba(10,15,25,0.3), rgba(3,6,10,0.95)), #020509';\n        overlay.style.display = 'flex';\n        overlay.style.flexDirection = 'column';\n        overlay.style.alignItems = 'center';\n        overlay.style.justifyContent = 'center';\n        overlay.style.color = '#e9eef5';\n        overlay.style.fontSize = '0.8rem';\n        overlay.style.letterSpacing = '.5px';\n        overlay.style.overflow = 'hidden';\n        const daysSurvived = this.game.state.day - 1;\n        const reason = this.game.state.deathReason || 'Health failure';\n        // Background layer (noise + gradient) built with DOM\n        const bgLayer = document.createElement('div');\n        bgLayer.style.position = 'absolute';\n        bgLayer.style.inset = '0';\n        bgLayer.style.pointerEvents = 'none';\n        bgLayer.style.background = 'repeating-linear-gradient(0deg, rgba(255,255,255,0.025) 0 2px, transparent 2px 4px), linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.85) 85%)';\n        bgLayer.style.opacity = '0.4';\n        overlay.appendChild(bgLayer);\n        // Foreground panel\n        const panel = document.createElement('div');\n        panel.style.textAlign = 'center';\n        panel.style.maxWidth = '260px';\n        panel.style.lineHeight = '1.35';\n        panel.style.position = 'relative';\n        panel.style.padding = '1.1rem 1.2rem 1.3rem';\n        panel.style.background = 'rgba(8,14,22,0.65)';\n        panel.style.border = '1px solid #1e2f45';\n        panel.style.borderRadius = '18px';\n        panel.style.boxShadow = '0 0 0 3px rgba(255,255,255,0.05) inset, 0 12px 28px -6px rgba(0,0,0,0.8)';\n        panel.style.backdropFilter = 'blur(6px)';\n        const heading = document.createElement('div');\n        heading.textContent = 'Your Journey Ends';\n        heading.style.fontSize = '0.75rem';\n        heading.style.letterSpacing = '.35px';\n        heading.style.textTransform = 'uppercase';\n        heading.style.color = '#9cb8d4';\n        heading.style.fontWeight = '600';\n        panel.appendChild(heading);\n        const skull = document.createElement('div');\n        skull.textContent = '💀';\n        skull.style.fontSize = '2.6rem';\n        skull.style.lineHeight = '1';\n        skull.style.margin = '0.2rem 0 0.4rem';\n        skull.style.filter = 'drop-shadow(0 0 6px #5b0000)';\n        panel.appendChild(skull);\n        const title = document.createElement('div');\n        title.textContent = 'You Died';\n        title.style.fontSize = '0.95rem';\n        title.style.fontWeight = '700';\n        title.style.letterSpacing = '.5px';\n        title.style.color = '#fff';\n        title.style.textShadow = '0 0 6px rgba(255,0,0,0.35)';\n        panel.appendChild(title);\n        const survived = document.createElement('div');\n        survived.innerHTML = `Survived <strong>${daysSurvived}</strong> ${daysSurvived === 1 ? 'Day' : 'Days'}.`;\n        survived.style.marginTop = '0.5rem';\n        survived.style.fontSize = '0.7rem';\n        survived.style.color = '#c3d2e0';\n        panel.appendChild(survived);\n        const reasonEl = document.createElement('div');\n        reasonEl.textContent = reason;\n        reasonEl.style.marginTop = '0.4rem';\n        reasonEl.style.fontSize = '0.6rem';\n        reasonEl.style.color = '#ffb3b3';\n        reasonEl.style.fontStyle = 'italic';\n        panel.appendChild(reasonEl);\n        const restart = document.createElement('button');\n        restart.id = 'reloadBtn';\n        restart.textContent = 'Restart';\n        restart.style.marginTop = '0.8rem';\n        restart.style.background = 'linear-gradient(145deg,#ff5252,#c21212)';\n        restart.style.color = '#fff';\n        restart.style.border = 'none';\n        restart.style.padding = '8px 14px';\n        restart.style.borderRadius = '10px';\n        restart.style.cursor = 'pointer';\n        restart.style.fontSize = '0.65rem';\n        restart.style.fontWeight = '600';\n        restart.style.letterSpacing = '.5px';\n        restart.style.boxShadow = '0 4px 14px -4px rgba(255,0,0,0.5)';\n        panel.appendChild(restart);\n        const footer = document.createElement('div');\n        footer.textContent = 'Balance was lost...';\n        footer.style.marginTop = '0.65rem';\n        footer.style.fontSize = '0.5rem';\n        footer.style.letterSpacing = '.4px';\n        footer.style.opacity = '0.45';\n        panel.appendChild(footer);\n        overlay.appendChild(panel);\n        // Flicker effect\n        overlay.animate([\n            { opacity: 0 },\n            { opacity: 1 }\n        ], { duration: 600, easing: 'ease-out' });\n        // Subtle pulsating vignette\n        setInterval(() => {\n            overlay.style.backgroundPosition = `${Math.random() * 4}px ${Math.random() * 4}px`;\n        }, 1400);\n        const wrapper = gridEl.parentElement;\n        wrapper.style.position = 'relative';\n        wrapper.appendChild(overlay);\n        restart.addEventListener('click', () => { location.reload(); });\n    }\n    getRecentDayNames() {\n        // Forward looking: bottom = current day, middle = tomorrow, top = day after tomorrow\n        const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n        const currentIndex = (this.dayCounter - 1 + days.length * 1000) % days.length; // current\n        const tomorrowIndex = (currentIndex + 1) % days.length;\n        const nextIndex = (currentIndex + 2) % days.length;\n        return { top: days[nextIndex], mid: days[tomorrowIndex], bottom: days[currentIndex] };\n    }\n    bindControls() {\n        window.addEventListener('keydown', (e) => {\n            if (!this.running || this.paused)\n                return;\n            if (e.key === 'ArrowLeft') {\n                this.playerCol = Math.max(0, this.playerCol - 1);\n                this.collect();\n                this.render();\n            }\n            else if (e.key === 'ArrowRight') {\n                this.playerCol = Math.min(GRID_COLS - 1, this.playerCol + 1);\n                this.collect();\n                this.render();\n            }\n            else if (e.key === ' ') {\n                this.collect();\n                this.render();\n            }\n        });\n        // Removed start button; continuous loop\n        const btn = document.getElementById('pauseBtn');\n        if (btn) {\n            btn.addEventListener('click', () => {\n                this.paused = !this.paused;\n                btn.setAttribute('aria-pressed', this.paused ? 'true' : 'false');\n                btn.textContent = this.paused ? '▶' : '⏸';\n            });\n        }\n    }\n    collect() {\n        // Collect item in bottom row at playerCol\n        if (this.paused)\n            return;\n        const cell = this.grid[GRID_ROWS - 1][this.playerCol];\n        if (cell.type === 'food' && cell.food) {\n            this.foodsCollected.push(cell.food);\n            cell.type = 'empty';\n            cell.food = undefined;\n            cell.emoji = ''; // mark collected\n            if (window.audioManager?.setDebug) {\n                // lightweight inline log to correlate with audio attempts\n                const st = window.audioManager.status?.();\n                console.log('[Game] collectFood triggering sound', st);\n            }\n            audioManager.collectFood();\n        }\n        else if (cell.type === 'fitness' && cell.fitness) {\n            this.fitnessChosen = cell.fitness;\n            cell.type = 'empty';\n            cell.fitness = undefined;\n            cell.emoji = '';\n            if (window.audioManager?.setDebug) {\n                const st = window.audioManager.status?.();\n                console.log('[Game] collectFitness triggering sound', st);\n            }\n            audioManager.collectFitness();\n        }\n    }\n    render() {\n        const gridEl = qs('#gameGrid');\n        gridEl.innerHTML = '';\n        const dayNames = this.getRecentDayNames();\n        for (let r = 0; r < GRID_ROWS; r++) {\n            // Row label cell (first column)\n            const labelDiv = document.createElement('div');\n            labelDiv.className = 'row-label';\n            // Assign based on row index referencing dayNames object\n            labelDiv.textContent = r === 0 ? dayNames.top : r === 1 ? dayNames.mid : dayNames.bottom;\n            gridEl.appendChild(labelDiv);\n            for (let c = 0; c < GRID_COLS; c++) {\n                const cell = this.grid[r][c];\n                const div = document.createElement('div');\n                div.className = 'cell';\n                if (cell.type === 'food')\n                    div.classList.add('food');\n                if (cell.type === 'fitness')\n                    div.classList.add('fitness');\n                // Apply dimming: top row strong, middle row mild\n                if (r === 0)\n                    div.classList.add('future-strong');\n                else if (r === 1)\n                    div.classList.add('future-mid');\n                if (r === GRID_ROWS - 1 && c === this.playerCol)\n                    div.classList.add('player');\n                // Show icon, name, and details below\n                let label = '';\n                let details = '';\n                if (cell.type === 'food' && cell.food) {\n                    label = cell.food.name.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                    // Short details: vitamins, sugar, price\n                    details = `Vit:${cell.food.vitamins} Sug:${cell.food.sugar} $${cell.food.price}`;\n                }\n                else if (cell.type === 'fitness' && cell.fitness) {\n                    label = cell.fitness.action.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                    // Short details: fitness, energy, cost\n                    details = `Fit:${cell.fitness.fitnessChange} Eng:${cell.fitness.energyChange} $${cell.fitness.cost}`;\n                }\n                div.innerHTML = `<span class=\"grid-emoji\">${cell.emoji}</span><span class=\"grid-label\">${label}</span><span class=\"grid-details\">${details}</span>`;\n                // Interactive zones: bottom row (normal collect) and middle row (fast-forward)\n                if (r === GRID_ROWS - 1) {\n                    div.style.cursor = 'pointer';\n                    const handler = () => {\n                        if (!this.running)\n                            return;\n                        this.playerCol = c;\n                        this.collect();\n                        this.render();\n                    };\n                    div.addEventListener('click', handler);\n                    div.addEventListener('touchstart', handler, { passive: true });\n                }\n                else if (r === 1) {\n                    div.style.cursor = 'pointer';\n                    const handler = () => {\n                        if (!this.running)\n                            return;\n                        this.playerCol = c;\n                        this.collectMiddleRow(c);\n                    };\n                    div.addEventListener('click', handler);\n                    div.addEventListener('touchstart', handler, { passive: true });\n                }\n                gridEl.appendChild(div);\n            }\n        }\n        this.ensureFixedArrow();\n        this.ensureFixedArrow();\n    }\n    // Middle row quick selection: accept item and end day immediately (simulate timer expiry)\n    collectMiddleRow(col) {\n        if (!this.running)\n            return;\n        if (this.paused)\n            return;\n        const cell = this.grid[1][col];\n        if (cell.type === 'food' && cell.food) {\n            this.foodsCollected.push(cell.food);\n            cell.type = 'empty';\n            cell.food = undefined;\n            cell.emoji = '';\n            if (window.audioManager?.setDebug) {\n                const st = window.audioManager.status?.();\n                console.log('[Game] collectFood (midRow) triggering sound', st);\n            }\n            audioManager.collectFood();\n        }\n        else if (cell.type === 'fitness' && cell.fitness) {\n            this.fitnessChosen = cell.fitness;\n            cell.type = 'empty';\n            cell.fitness = undefined;\n            cell.emoji = '';\n            if (window.audioManager?.setDebug) {\n                const st = window.audioManager.status?.();\n                console.log('[Game] collectFitness (midRow) triggering sound', st);\n            }\n            audioManager.collectFitness();\n        }\n        // Immediately end the day\n        this.endDay();\n    }\n    // Create / update the fixed refresh arrow outside the sliding grid rows\n    ensureFixedArrow() {\n        const wrapper = (qs('#gameGrid').parentElement);\n        if (!wrapper)\n            return;\n        let btn = wrapper.querySelector('.fixed-refresh-btn');\n        if (!btn) {\n            btn = document.createElement('div');\n            btn.className = 'fixed-refresh-btn';\n            wrapper.appendChild(btn);\n        }\n        // Update visual state\n        btn.classList.toggle('used', this.bottomRefreshed);\n        if (this.bottomRefreshed) {\n            btn.innerHTML = `⟳<span style=\"font-size:0.45rem; font-weight:600;\">USED</span>`;\n            btn.style.pointerEvents = 'none';\n        }\n        else {\n            btn.innerHTML = `▶<span style=\"font-size:0.45rem; font-weight:600;\">MORE</span>`;\n            btn.style.pointerEvents = 'auto';\n            const handler = () => { if (!this.running || this.paused)\n                return; this.refreshBottomOptions(); };\n            // Remove old to avoid multiple bindings\n            btn.replaceWith(btn.cloneNode(true));\n            btn = wrapper.querySelector('.fixed-refresh-btn'); // reselect cloned\n            btn.addEventListener('click', handler);\n            btn.addEventListener('touchstart', handler, { passive: true });\n        }\n    }\n    animateShiftWithNewRow() {\n        const gridEl = qs('#gameGrid');\n        const wrapper = gridEl.parentElement;\n        // Compute row height\n        const totalHeight = gridEl.getBoundingClientRect().height;\n        const rowHeight = totalHeight / GRID_ROWS;\n        // Prepare new data state (add new row at top, push others down, drop bottom)\n        const newRow = this.generateRow();\n        const prevRows = this.grid.map(r => [...r]);\n        for (let r = GRID_ROWS - 1; r > 0; r--)\n            this.grid[r] = prevRows[r - 1];\n        this.grid[0] = newRow;\n        // Render new state into a temporary off-DOM container to get HTML\n        const temp = document.createElement('div');\n        temp.className = 'grid';\n        // Build 4-row visual: new + previous 3 (the last previous row will fade out)\n        const visualRows = [this.grid[0], prevRows[0], prevRows[1], prevRows[2]];\n        const dayNames = this.getRecentDayNames();\n        temp.innerHTML = visualRows.map((row, rIdx) => {\n            // Keep label column fixed (no shifting classes) to preserve stable day-name positions\n            const labelCell = `<div class=\\\"row-label\\\">${rIdx === 0 ? dayNames.top : rIdx === 1 ? dayNames.mid : dayNames.bottom}</div>`;\n            const items = row.map((cell, cIdx) => {\n                const isPlayer = (rIdx === (visualRows.length - 1) && cIdx === this.playerCol); // bottom visual row uses old bottom\n                let label = '';\n                let details = '';\n                if (cell.type === 'food' && cell.food) {\n                    label = cell.food.name.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                    details = `Vit:${cell.food.vitamins} Sug:${cell.food.sugar} $${cell.food.price}`;\n                }\n                else if (cell.type === 'fitness' && cell.fitness) {\n                    label = cell.fitness.action.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                    details = `Fit:${cell.fitness.fitnessChange} Eng:${cell.fitness.energyChange} $${cell.fitness.cost}`;\n                }\n                const classes = ['cell'];\n                if (cell.type === 'food')\n                    classes.push('food');\n                if (cell.type === 'fitness')\n                    classes.push('fitness');\n                if (isPlayer)\n                    classes.push('player');\n                // visualRows order: 0 new top, 1 old top (becomes middle), 2 old middle (becomes bottom), 3 old bottom (fades out)\n                if (rIdx === 0)\n                    classes.push('future-strong');\n                else if (rIdx === 1)\n                    classes.push('future-mid');\n                const fade = rIdx === visualRows.length - 1 ? ' style=\"opacity:1;\"' : '';\n                return `<div class=\\\"${classes.join(' ')}\\\"${fade}><span class=\\\"grid-emoji\\\">${cell.emoji}</span><span class=\\\"grid-label\\\">${label}</span><span class=\\\"grid-details\\\">${details}</span></div>`;\n            }).join('');\n            return labelCell + items; // external fixed arrow only\n        }).join('');\n        // Place temp above existing grid and animate downward\n        const cloneLayer = document.createElement('div');\n        cloneLayer.className = 'grid-clone-layer';\n        cloneLayer.style.height = gridEl.style.height;\n        cloneLayer.appendChild(temp);\n        // Style temp for stack animation\n        temp.style.position = 'absolute';\n        temp.style.left = '0';\n        temp.style.right = '0';\n        temp.style.top = `-${rowHeight}px`;\n        temp.style.transform = `translateY(-${rowHeight}px)`;\n        temp.style.transition = 'transform .7s cubic-bezier(.45,.85,.4,1)';\n        // Fade out bottom part of old grid simultaneously\n        gridEl.style.transition = 'transform .7s cubic-bezier(.45,.85,.4,1), opacity .7s linear';\n        gridEl.style.transform = `translateY(${rowHeight}px)`;\n        gridEl.style.opacity = '0';\n        wrapper.style.position = 'relative';\n        wrapper.appendChild(cloneLayer);\n        // Trigger new render in actual grid after animation completes\n        requestAnimationFrame(() => {\n            temp.style.transform = 'translateY(0)';\n            gridEl.style.transform = `translateY(${rowHeight}px)`; // stays until end\n        });\n        const finish = () => {\n            temp.removeEventListener('transitionend', finish);\n            // Clean up clone layer\n            wrapper.removeChild(cloneLayer);\n            // Render final 3-row grid (already updated in this.grid)\n            gridEl.style.transition = '';\n            gridEl.style.transform = '';\n            gridEl.style.opacity = '1';\n            this.render();\n            // Provide a small control UI for starting the next day manually (or auto if user chooses)\n            this.injectNextDayControls();\n            // Auto-start next day if user enabled it and not dead\n            try {\n                const auto = localStorage.getItem('wq.autoNextDay') === '1';\n                if (auto && !this.game.state.isDead) {\n                    setTimeout(() => { this.startDay(); }, 350); // slight pause for readability\n                }\n            }\n            catch { }\n        };\n        temp.addEventListener('transitionend', finish);\n    }\n    injectNextDayControls() {\n        // Avoid duplicates\n        let bar = document.getElementById('nextDayBar');\n        if (!bar) {\n            bar = document.createElement('div');\n            bar.id = 'nextDayBar';\n            bar.style.display = 'flex';\n            bar.style.alignItems = 'center';\n            bar.style.justifyContent = 'space-between';\n            bar.style.gap = '0.5rem';\n            bar.style.marginTop = '0.45rem';\n            bar.style.background = '#eef3f9';\n            bar.style.border = '1px solid #d2dde9';\n            bar.style.padding = '0.4rem 0.55rem';\n            bar.style.borderRadius = '10px';\n            bar.style.boxShadow = '0 2px 4px rgba(0,0,0,0.08)';\n            const parentSection = document.querySelector('#minigame');\n            if (parentSection)\n                parentSection.appendChild(bar);\n        }\n        bar.innerHTML = '';\n        const left = document.createElement('div');\n        left.style.display = 'flex';\n        left.style.alignItems = 'center';\n        left.style.gap = '0.5rem';\n        left.style.fontSize = '0.55rem';\n        left.style.letterSpacing = '.5px';\n        left.style.fontWeight = '600';\n        left.style.color = '#234';\n        left.textContent = `Day ${(this.game.state.day)} ready`;\n        const btn = document.createElement('button');\n        btn.type = 'button';\n        btn.textContent = 'Start Next Day ▸';\n        btn.style.background = '#3f6cb3';\n        btn.style.color = '#fff';\n        btn.style.border = 'none';\n        btn.style.padding = '0.45rem 0.75rem';\n        btn.style.fontSize = '0.6rem';\n        btn.style.fontWeight = '600';\n        btn.style.borderRadius = '8px';\n        btn.style.cursor = 'pointer';\n        btn.style.letterSpacing = '.5px';\n        btn.addEventListener('click', () => { this.startDay(); });\n        const autoWrap = document.createElement('label');\n        autoWrap.style.display = 'flex';\n        autoWrap.style.alignItems = 'center';\n        autoWrap.style.gap = '4px';\n        autoWrap.style.fontSize = '0.5rem';\n        autoWrap.style.letterSpacing = '.5px';\n        autoWrap.style.fontWeight = '600';\n        autoWrap.style.color = '#345';\n        const auto = document.createElement('input');\n        auto.type = 'checkbox';\n        try {\n            auto.checked = localStorage.getItem('wq.autoNextDay') === '1';\n        }\n        catch { }\n        auto.addEventListener('change', () => {\n            try {\n                localStorage.setItem('wq.autoNextDay', auto.checked ? '1' : '0');\n            }\n            catch { }\n        });\n        autoWrap.appendChild(auto);\n        autoWrap.appendChild(document.createTextNode('Auto'));\n        bar.appendChild(left);\n        bar.appendChild(btn);\n        bar.appendChild(autoWrap);\n    }\n    // Refresh only bottom row options (generate a new row) with horizontal slide animation\n    refreshBottomOptions() {\n        if (this.bottomRefreshed)\n            return;\n        this.bottomRefreshed = true;\n        audioManager.refresh();\n        // Generate a fresh row; keep other rows unchanged\n        const oldRow = this.grid[GRID_ROWS - 1];\n        const newRow = this.generateRow();\n        // Build animation layer\n        const gridEl = qs('#gameGrid');\n        const wrapper = gridEl.parentElement;\n        const height = gridEl.getBoundingClientRect().height;\n        const rowHeight = height / GRID_ROWS;\n        // Extract existing bottom row DOM nodes (excluding label first column and arrow at end if present)\n        // We'll animate only the content cells + arrow cell.\n        // Simpler: rebuild a horizontal layer representing bottom row.\n        const bottomLayer = document.createElement('div');\n        bottomLayer.className = 'bottom-refresh-layer';\n        bottomLayer.style.position = 'absolute';\n        bottomLayer.style.left = '0';\n        bottomLayer.style.right = '0';\n        bottomLayer.style.bottom = '0';\n        bottomLayer.style.height = `${rowHeight}px`;\n        bottomLayer.style.pointerEvents = 'none';\n        wrapper.style.position = 'relative';\n        // Compose two strips: old and new\n        const stripWidthPct = 100; // percentage width of visible area\n        const strip = document.createElement('div');\n        strip.style.position = 'absolute';\n        strip.style.inset = '0';\n        strip.style.display = 'grid';\n        // Current grid has: label + GRID_COLS cells + arrow cell (we simulate arrow cell)\n        const totalCols = GRID_COLS + 1; // label + items (no arrow cell rendered here)\n        strip.style.gridTemplateColumns = `24px repeat(${GRID_COLS}, 1fr)`;\n        strip.style.transform = 'translateX(0)';\n        strip.style.transition = 'transform .55s cubic-bezier(.55,.1,.3,1)';\n        // Build helper to render a cell for a given item\n        const renderCell = (cell, isPlayer) => {\n            let label = '';\n            let details = '';\n            if (cell.type === 'food' && cell.food) {\n                label = cell.food.name.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                details = `Vit:${cell.food.vitamins} Sug:${cell.food.sugar} $${cell.food.price}`;\n            }\n            else if (cell.type === 'fitness' && cell.fitness) {\n                label = cell.fitness.action.replace(/([\\u{1F300}-\\u{1FAFF}\\u{2600}-\\u{27BF}])/gu, '').trim();\n                details = `Fit:${cell.fitness.fitnessChange} Eng:${cell.fitness.energyChange} $${cell.fitness.cost}`;\n            }\n            const classes = ['cell'];\n            if (cell.type === 'food')\n                classes.push('food');\n            if (cell.type === 'fitness')\n                classes.push('fitness');\n            if (isPlayer)\n                classes.push('player');\n            return `<div class=\"${classes.join(' ')}\"><span class=\"grid-emoji\">${cell.emoji}</span><span class=\"grid-label\">${label}</span><span class=\"grid-details\">${details}</span></div>`;\n        };\n        const labelCell = `<div class=\"row-label\">${this.getRecentDayNames().bottom}</div>`;\n        // Old strip: label + old items (arrow excluded; fixed button overlay handles it)\n        const oldStrip = labelCell + oldRow.map((c, idx) => renderCell(c, idx === this.playerCol)).join('');\n        // New strip: label + new items\n        const newStrip = labelCell + newRow.map((c, idx) => renderCell(c, idx === this.playerCol)).join('');\n        // Container that holds both old and new side by side (old visible, new to right)\n        const slider = document.createElement('div');\n        slider.style.display = 'grid';\n        slider.style.gridTemplateColumns = `repeat(2, ${totalCols} * 1fr)`; // structural placeholder\n        slider.style.position = 'absolute';\n        slider.style.inset = '0';\n        slider.style.width = '200%';\n        slider.style.display = 'flex';\n        const oldContainer = document.createElement('div');\n        oldContainer.className = 'bottom-old';\n        oldContainer.style.display = 'grid';\n        oldContainer.style.gridTemplateColumns = `24px repeat(${GRID_COLS}, 1fr)`;\n        oldContainer.innerHTML = oldStrip;\n        const newContainer = document.createElement('div');\n        newContainer.className = 'bottom-new';\n        newContainer.style.display = 'grid';\n        newContainer.style.gridTemplateColumns = `24px repeat(${GRID_COLS}, 1fr)`;\n        newContainer.innerHTML = newStrip;\n        slider.appendChild(oldContainer);\n        slider.appendChild(newContainer);\n        strip.appendChild(slider);\n        bottomLayer.appendChild(strip);\n        wrapper.appendChild(bottomLayer);\n        // Trigger sliding\n        requestAnimationFrame(() => {\n            strip.style.transform = 'translateX(-50%)';\n        });\n        const finish = () => {\n            strip.removeEventListener('transitionend', finish);\n            bottomLayer.remove();\n            // Commit new row to grid data\n            this.grid[GRID_ROWS - 1] = newRow;\n            // Re-render to show updated items and arrow state\n            this.render();\n            this.ensureFixedArrow();\n        };\n        strip.addEventListener('transitionend', finish);\n    }\n}\n//# sourceMappingURL=minigame.js.map","import { loadAllData } from './src/dataLoader';\r\nimport { Game } from './src/game';\r\nimport { updateStatsView, appendLog, snapshotStatsForNextTurn, updateDaysSurvived } from './src/ui';\r\nimport { DailyRunMinigame } from './src/minigame';\r\nimport { audioManager } from './src/audio';\r\n// Removed dynamic icon import since icons are now served from public.\r\n\r\n// Ambient typing for Vite env (avoid TS complaint when not using provided vite-env.d.ts)\r\ndeclare global {\r\n  interface ImportMeta { env?: { PROD?: boolean; [k: string]: any }; }\r\n}\r\n\r\n(async function init(){\r\n  appendLog('Loading data...');\r\n  const data = await loadAllData();\r\n  const game = new Game(data);\r\n  (window as any).game = game; // for console debugging\r\n  snapshotStatsForNextTurn(game);\r\n  updateStatsView(game);\r\n  updateDaysSurvived(game);\r\n  // Initialize minigame but DO NOT start the day yet (welcome screen will trigger)\r\n  const mini = new DailyRunMinigame(game, 5000);\r\n  (window as any).minigame = mini;\r\n  appendLog('Game initialized. Configure settings then start your first day.');\r\n})();\r\n\r\n// Overlay reliability helpers (module scope)\r\nlet __wq_overlayHealChecks = 0;\r\nconst __WQ_MAX_HEAL_CHECKS = 8;\r\nlet __wq_healTimer: number | null = null;\r\nfunction __wq_scheduleOverlayHeal(buildFn: () => void, startedFlagFn: () => boolean){\r\n  if (__wq_healTimer != null) return;\r\n  const loop = () => {\r\n    if ((window as any).__WQ_USER_START) { if (__wq_healTimer) clearTimeout(__wq_healTimer); __wq_healTimer = null; return; }\r\n    const hasOverlay = !!document.getElementById('welcomeOverlay');\r\n    if (!hasOverlay && !startedFlagFn()) {\r\n      console.info('[WelcomeOverlay] heal loop reinject (overlay missing, not started)');\r\n      buildFn();\r\n    }\r\n    __wq_overlayHealChecks++;\r\n    if (__wq_overlayHealChecks < __WQ_MAX_HEAL_CHECKS) __wq_healTimer = window.setTimeout(loop, 700); else { console.info('[WelcomeOverlay] heal loop finished'); __wq_healTimer = null; }\r\n  };\r\n  __wq_healTimer = window.setTimeout(loop, 700);\r\n}\r\nfunction __wq_attachOverlayGuardian(buildFn: () => void, startedFlagFn: () => boolean){\r\n  if ((window as any).__WQ_OVERLAY_GUARD) return;\r\n  try {\r\n    const obs = new MutationObserver(() => {\r\n      if ((window as any).__WQ_USER_START) return;\r\n      const hasOverlay = !!document.getElementById('welcomeOverlay');\r\n      if (!hasOverlay && !startedFlagFn()) {\r\n        console.info('[WelcomeOverlay] guardian reinject (overlay removed unexpectedly)');\r\n        buildFn();\r\n      }\r\n    });\r\n    obs.observe(document.body, { childList: true });\r\n    (window as any).__WQ_OVERLAY_GUARD = obs;\r\n    console.info('[WelcomeOverlay] guardian attached');\r\n  } catch(e){ console.info('[WelcomeOverlay] guardian attach failed', e); }\r\n}\r\n\r\n// PWA: register service worker\r\n// Service Worker: only register in production to avoid dev HMR reconnect issues\r\nif ('serviceWorker' in navigator) {\r\n  if (import.meta.env && import.meta.env.PROD) {\r\n    window.addEventListener('load', () => {\r\n  navigator.serviceWorker.register('./sw.js').catch(err => console.warn('SW registration failed', err));\r\n      setTimeout(() => {\r\n        const headerIcon = document.querySelector('header img');\r\n        if (headerIcon instanceof HTMLImageElement) {\r\n          if (!headerIcon.complete || headerIcon.naturalWidth === 0) {\r\n            console.warn('Header icon not loaded, forcing reload of src');\r\n            const src = headerIcon.getAttribute('src');\r\n            if (src) headerIcon.src = src + '?v=' + Date.now();\r\n          }\r\n        }\r\n      }, 600);\r\n    });\r\n  } else {\r\n    // Dev mode: aggressively unregister any previously installed SW to prevent stale cache & HMR websocket interference\r\n    navigator.serviceWorker.getRegistrations().then(regs => {\r\n      if (regs.length) console.info('[DevSW] Unregistering stale service workers:', regs.length);\r\n      regs.forEach(r => r.unregister());\r\n    }).catch(()=>{});\r\n    if (caches && caches.keys) {\r\n      caches.keys().then(keys => {\r\n        keys.filter(k => /wellnessquest|vite|workbox/i.test(k)).forEach(k => caches.delete(k));\r\n      }).catch(()=>{});\r\n    }\r\n  }\r\n}\r\n\r\n// Welcome screen bootstrapping (injected dynamically if markup exists later)\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const START_FLAG = 'wq.started.v1';\r\n  const LEGACY_FLAG = 'wq.started';\r\n  const SESSION_FLAG = 'wq.intro.shown.session';\r\n  const DIAG = (msg: string, meta?: any) => console.info('[WelcomeOverlay]', msg, meta || '');\r\n  let overlayAttempted = false;\r\n  // Accessor used by guardian/heal helpers\r\n  const startedFlagFn = () => !!localStorage.getItem(START_FLAG);\r\n\r\n  // Migrate legacy flag if present\r\n  try {\r\n    if (!localStorage.getItem(START_FLAG) && localStorage.getItem(LEGACY_FLAG)) {\r\n      localStorage.setItem(START_FLAG, '1');\r\n      localStorage.removeItem(LEGACY_FLAG);\r\n      DIAG('migrated legacy flag');\r\n    }\r\n  } catch {}\r\n  const urlForce = new URL(location.href).searchParams.has('intro');\r\n  const hasStarted = !!localStorage.getItem(START_FLAG);\r\n  const sessionShown = !!sessionStorage.getItem(SESSION_FLAG);\r\n  DIAG('init', { hasStarted, sessionShown, urlForce, allowFlag: (window as any).__WQ_ALLOW_START });\r\n  if (urlForce) {\r\n    DIAG('forcing intro via ?intro');\r\n    try { localStorage.removeItem(START_FLAG); localStorage.removeItem(LEGACY_FLAG); } catch {}\r\n    sessionStorage.removeItem(SESSION_FLAG);\r\n    buildWelcomeOverlay();\r\n    overlayAttempted = true;\r\n    sessionStorage.setItem(SESSION_FLAG,'1');\r\n  } else if (!sessionShown) {\r\n    // Show once per tab session\r\n    buildWelcomeOverlay();\r\n    overlayAttempted = true;\r\n    sessionStorage.setItem(SESSION_FLAG,'1');\r\n  } else if (!hasStarted) {\r\n    // Player never started (flag absent) but session already marked -> rebuild\r\n    DIAG('rebuilding overlay (not started yet this session)');\r\n    buildWelcomeOverlay();\r\n    overlayAttempted = true;\r\n  }\r\n  // Header reset intro\r\n  const resetIntroBtn = document.getElementById('resetIntroBtn');\r\n  if (resetIntroBtn) {\r\n    resetIntroBtn.addEventListener('click', () => {\r\n      DIAG('manual reset');\r\n      try { localStorage.removeItem(START_FLAG); localStorage.removeItem(LEGACY_FLAG); } catch {}\r\n      try { sessionStorage.removeItem(SESSION_FLAG); } catch {}\r\n      (window as any).__WQ_ALLOW_START = false;\r\n      const existing = document.getElementById('welcomeOverlay');\r\n      if (existing) existing.remove();\r\n      buildWelcomeOverlay();\r\n      overlayAttempted = true;\r\n      sessionStorage.setItem(SESSION_FLAG,'1');\r\n    });\r\n  }\r\n  // Restart button logic: full wipe and re-init\r\n  const restartBtn = document.getElementById('restartGameBtn');\r\n  if (restartBtn) {\r\n    restartBtn.addEventListener('click', () => {\r\n      DIAG('hard restart invoked');\r\n      try {\r\n        localStorage.removeItem(START_FLAG);\r\n        localStorage.removeItem(LEGACY_FLAG);\r\n        sessionStorage.removeItem(SESSION_FLAG);\r\n      } catch {}\r\n      // Attempt to stop any running minigame loop\r\n      try { (window as any).minigame && ((window as any).minigame.running = false); } catch {}\r\n      // Clear penalty log display\r\n      const logEl = document.getElementById('penaltyLog');\r\n      if (logEl) logEl.innerHTML = '';\r\n      // Remove stats & reset days badge\r\n      const statsEl = document.getElementById('stats');\r\n      if (statsEl) statsEl.innerHTML = '';\r\n      const dayBadge = document.getElementById('daysSurvived');\r\n      if (dayBadge) {\r\n        const lbl = dayBadge.querySelector('.label'); if (lbl) lbl.textContent = 'Day 1';\r\n        const prog = dayBadge.querySelector('.progress') as HTMLElement | null; if (prog) prog.style.width = '0%';\r\n      }\r\n      // Recreate game + minigame fresh\r\n      (async () => {\r\n        try {\r\n          const data = await loadAllData();\r\n          const game = new Game(data);\r\n          (window as any).game = game;\r\n          snapshotStatsForNextTurn(game);\r\n          updateStatsView(game);\r\n          updateDaysSurvived(game);\r\n          const mini = new DailyRunMinigame(game, 5000);\r\n          (window as any).minigame = mini;\r\n          (window as any).__WQ_ALLOW_START = false;\r\n          DIAG('restart new instances ready');\r\n          // Build intro overlay anew\r\n          const existing = document.getElementById('welcomeOverlay');\r\n          if (existing) existing.remove();\r\n          overlayAttempted = false;\r\n          buildWelcomeOverlay();\r\n          overlayAttempted = true;\r\n          sessionStorage.setItem(SESSION_FLAG,'1');\r\n        } catch (e) {\r\n          DIAG('restart failed', e);\r\n        }\r\n      })();\r\n    });\r\n  }\r\n  function bindStart() {\r\n    const startBtn = document.getElementById('welcomeStartBtn');\r\n    if (!startBtn) return;\r\n    startBtn.addEventListener('click', () => {\r\n      const slider = document.getElementById('dayLenSlider') as HTMLInputElement | null;\r\n      const hardshipSlider = document.getElementById('hardshipSlider') as HTMLInputElement | null;\r\n      if ((window as any).minigame && slider) {\r\n        (window as any).minigame.setDayDurationSeconds(Number(slider.value));\r\n      }\r\n      if ((window as any).game && hardshipSlider) {\r\n        (window as any).game.setHardshipFactor(Number(hardshipSlider.value));\r\n      }\r\n      // Initialize audio context on first explicit user action\r\n      audioManager.init();\r\n      // Mark explicit user start to allow overlay removal inside startDay\r\n      (window as any).__WQ_USER_START = true;\r\n      (window as any).__WQ_ALLOW_START = true;\r\n      try { (window as any).minigame.startDay(); DIAG('startDay invoked from button'); } catch(e){ DIAG('startDay failed from button', e); }\r\n      try { localStorage.setItem(START_FLAG,'1'); } catch {}\r\n      try { sessionStorage.setItem(SESSION_FLAG,'1'); } catch {}\r\n      const overlay = document.getElementById('welcomeOverlay');\r\n      if (overlay) overlay.remove();\r\n      try { (window as any).__WQ_OVERLAY_GUARD?.disconnect?.(); delete (window as any).__WQ_OVERLAY_GUARD; DIAG('guardian disconnected (user start)'); } catch {}\r\n      if (__wq_healTimer) { clearTimeout(__wq_healTimer); __wq_healTimer = null; }\r\n    });\r\n  }\r\n  const detailsToggle = document.getElementById('detailsToggle');\r\n  if (detailsToggle) {\r\n    detailsToggle.addEventListener('click', () => {\r\n      const expanded = detailsToggle.getAttribute('aria-expanded') === 'true';\r\n      detailsToggle.setAttribute('aria-expanded', (!expanded).toString());\r\n      const panel = document.getElementById('detailsPanel');\r\n      if (panel) panel.classList.toggle('hidden', expanded);\r\n    });\r\n  }\r\n  const slider = document.getElementById('dayLenSlider') as HTMLInputElement | null;\r\n  const sliderVal = document.getElementById('dayLenValue');\r\n  if (slider && sliderVal) {\r\n    const updateVal = () => sliderVal!.textContent = slider.value + 's';\r\n    slider.addEventListener('input', updateVal);\r\n    updateVal();\r\n  }\r\n  const hardshipSlider = document.getElementById('hardshipSlider') as HTMLInputElement | null;\r\n  const hardshipValue = document.getElementById('hardshipValue');\r\n  const hardshipLabel = document.getElementById('hardshipLabel');\r\n  if (hardshipSlider && hardshipValue && hardshipLabel) {\r\n    const descFor = (v: number) => {\r\n      if (v < 0.75) return 'Easy: slower decay & more income';\r\n      if (v < 1.15) return 'Normal: standard decay & income';\r\n      if (v < 1.5) return 'Challenging: faster decay';\r\n      if (v < 1.9) return 'Hard: tough decay & reduced income';\r\n      return 'Brutal: survival is rare';\r\n    };\r\n    const updateHardship = () => {\r\n      const val = Number(hardshipSlider.value);\r\n      hardshipValue.textContent = val.toFixed(1) + 'x';\r\n      hardshipLabel.textContent = descFor(val);\r\n    };\r\n    hardshipSlider.addEventListener('input', updateHardship);\r\n    updateHardship();\r\n  }\r\n  // Sound toggle logic\r\n  const soundToggle = document.getElementById('soundToggle');\r\n  if (soundToggle) {\r\n    soundToggle.addEventListener('click', () => {\r\n      // Lazy initialize if toggle pressed pre-start\r\n      audioManager.init();\r\n      const enabled = audioManager.toggle();\r\n      soundToggle.textContent = enabled ? '🔊' : '🔇';\r\n      soundToggle.setAttribute('aria-pressed', (!enabled).toString());\r\n    });\r\n  }\r\n  // Gesture-based audio unlock\r\n  window.addEventListener('pointerdown', oneTimeUnlock, { once: true, passive: true });\r\n  window.addEventListener('keydown', oneTimeUnlock, { once: true });\r\n  function oneTimeUnlock(){\r\n    try { (window as any).audioManager?.init(); } catch {}\r\n  }\r\n\r\n  // (Removed duplicate inline overlay reliability helpers; using global versions declared above.)\r\n\r\n  function buildWelcomeOverlay() {\r\n    if (document.getElementById('welcomeOverlay')) return;\r\n    DIAG('building overlay');\r\n    const wrap = document.createElement('div');\r\n    wrap.id = 'welcomeOverlay';\r\n    wrap.style.cssText = 'position:fixed;inset:0;background:linear-gradient(135deg,#123050,#0d1e33);color:#fff;display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem;';\r\n    wrap.innerHTML = `\r\n      <div style=\"background:#152a43;width:min(560px,92%);max-height:92%;overflow:auto;border-radius:24px;padding:1.35rem 1.4rem 1.55rem;box-shadow:0 12px 42px -8px rgba(0,0,0,0.65);display:flex;flex-direction:column;gap:1rem;font-size:0.85rem;line-height:1.4;\">\r\n        <div style=\"display:flex;flex-direction:row;align-items:flex-start;gap:0.9rem;\">\r\n          <img src=\"icons/icon-192.png\" alt=\"WellnessQuest Icon\" width=\"72\" height=\"72\" style=\"border-radius:18px;flex:0 0 auto;box-shadow:0 4px 14px -4px rgba(0,0,0,0.55);background:#0f1826;object-fit:cover;\" />\r\n          <div style=\"display:flex;flex-direction:column;gap:0.65rem;\">\r\n            <h2 style=\"margin:0;font-size:1.35rem;letter-spacing:.5px;font-weight:700;\">Welcome to WellnessQuest</h2>\r\n            <p style=\"margin:0;font-size:0.78rem;opacity:0.9;\">Balance nutrition, fitness, mood, and energy. Collect foods and maybe hit the gym each day. Avoid excess while preventing deficiencies.</p>\r\n          </div>\r\n        </div>\r\n        <div style=\"display:flex;flex-direction:column;gap:0.5rem;background:#0f1f33;padding:0.75rem 0.85rem 0.9rem;border:1px solid #1e3d62;border-radius:16px;\">\r\n          <label for=\"dayLenSlider\" style=\"font-size:0.72rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase;color:#b9d6ff;\">Day Duration <span id=\"dayLenValue\" style=\"color:#fff;font-weight:700;margin-left:4px;\">5s</span></label>\r\n          <input id=\"dayLenSlider\" type=\"range\" min=\"5\" max=\"20\" step=\"1\" value=\"5\" style=\"width:100%;accent-color:#4a8fff;\" />\r\n          <div style=\"display:flex;justify-content:space-between;font-size:0.55rem;letter-spacing:.5px;opacity:0.7;margin-top:-4px;\"><span>Faster</span><span>Slower</span></div>\r\n          <div style=\"margin-top:0.6rem;display:flex;flex-direction:column;gap:0.5rem;\">\r\n            <label for=\"hardshipSlider\" style=\"font-size:0.72rem;font-weight:600;letter-spacing:.5px;text-transform:uppercase;color:#b9d6ff;\">Life Hardship <span id=\"hardshipValue\" style=\"color:#fff;font-weight:700;margin-left:4px;\">1.0x</span></label>\r\n            <input id=\"hardshipSlider\" type=\"range\" min=\"0.5\" max=\"2\" step=\"0.1\" value=\"1\" style=\"width:100%;accent-color:#ff8d3a;\" />\r\n            <div style=\"display:flex;justify-content:space-between;font-size:0.5rem;letter-spacing:.5px;opacity:0.65;\"><span>Easy</span><span>Normal</span><span>Brutal</span></div>\r\n            <div id=\"hardshipLabel\" style=\"font-size:0.55rem;letter-spacing:.5px;color:#ffd5b0;font-weight:600;text-align:center;\">Normal: standard decay & income</div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <button id=\"detailsToggle\" aria-expanded=\"false\" style=\"background:#23466d;color:#fff;border:1px solid #3a6a9d;padding:0.5rem 0.8rem;font-size:0.65rem;border-radius:10px;cursor:pointer;letter-spacing:.5px;font-weight:600;\">Show Detailed Rules ▾</button>\r\n        </div>\r\n        <div id=\"detailsPanel\" class=\"hidden\" style=\"background:#0f1f33;border:1px solid #1d3a5d;padding:0.8rem 0.85rem 0.95rem;border-radius:16px;font-size:0.66rem;display:flex;flex-direction:column;gap:0.55rem;\">\r\n          <div style=\"font-weight:600;letter-spacing:.5px;text-transform:uppercase;font-size:0.55rem;color:#b6d4ff;\">Health & Risk System</div>\r\n          <ul style=\"margin:0 0 0 1.1rem;padding:0;display:flex;flex-direction:column;gap:0.25rem;\">\r\n            <li>Deficiencies (vitamins / minerals / protein) hurt health.</li>\r\n            <li>Excess sugar/cholesterol/sodium penalize at 100+, worse at 110+.</li>\r\n            <li>Low energy or mood stacks penalties.</li>\r\n            <li>Good fitness + mood + energy gives a bonus.</li>\r\n            <li>Streak of healthy meals adds a bonus.</li>\r\n          </ul>\r\n        </div>\r\n        <button id=\"welcomeStartBtn\" style=\"background:#4a8fff;color:#fff;border:none;padding:0.9rem 1.2rem;font-size:0.9rem;font-weight:600;border-radius:14px;cursor:pointer;letter-spacing:.5px;box-shadow:0 4px 12px -3px rgba(0,0,0,0.5);\">Start Day 1 ▸</button>\r\n        <div style=\"text-align:center;font-size:0.5rem;letter-spacing:.5px;opacity:0.5;\">v0.1 prototype</div>\r\n      </div>`;\r\n    document.body.appendChild(wrap);\r\n  __wq_attachOverlayGuardian(buildWelcomeOverlay, startedFlagFn);\r\n  __wq_scheduleOverlayHeal(buildWelcomeOverlay, startedFlagFn);\r\n    bindStart();\r\n  }\r\n\r\n  // Bind start if overlay already injected (cold load path)\r\n  bindStart();\r\n\r\n  // Fallback phases to ensure at least one overlay appears. Removed previous auto-start\r\n  // behavior because it could start the game then immediately remove the overlay before\r\n  // the user interacted, creating a flashing effect with no stable intro.\r\n  setTimeout(() => {\r\n    const running = (window as any).minigame?.running;\r\n    const hasOverlay = !!document.getElementById('welcomeOverlay');\r\n    const started = !!localStorage.getItem(START_FLAG);\r\n    const sessionSeen = !!sessionStorage.getItem(SESSION_FLAG);\r\n    if (!running && !hasOverlay && !sessionSeen && !overlayAttempted) {\r\n      DIAG('fallback phase1 inject (no overlay, not running)');\r\n      buildWelcomeOverlay();\r\n      overlayAttempted = true;\r\n      sessionStorage.setItem(SESSION_FLAG,'1');\r\n      return;\r\n    }\r\n    // Second check only attempts to (re)inject overlay; never auto-start\r\n    if (!started && !hasOverlay && !running) {\r\n      DIAG('scheduling second check (overlay still missing)');\r\n      setTimeout(() => {\r\n        const againOverlay = !!document.getElementById('welcomeOverlay');\r\n        const againStarted = !!localStorage.getItem(START_FLAG);\r\n        const runningNow = (window as any).minigame?.running;\r\n        if (!againOverlay && !againStarted && !runningNow) {\r\n          DIAG('second check force inject (still missing)');\r\n          buildWelcomeOverlay();\r\n        }\r\n      }, 900);\r\n    }\r\n  }, 800);\r\n\r\n  // Manual dev helper for debugging\r\n  (window as any).forceIntro = () => {\r\n    try { localStorage.removeItem(START_FLAG); sessionStorage.removeItem(SESSION_FLAG); } catch {}\r\n    const existing = document.getElementById('welcomeOverlay');\r\n    if (existing) existing.remove();\r\n    overlayAttempted = false;\r\n    buildWelcomeOverlay();\r\n    overlayAttempted = true;\r\n    DIAG('forceIntro invoked');\r\n  };\r\n});\r\n"],"names":["fetchJSON","path","res","loadAllData","basePath","playerStatsFile","foodsFile","fitnessFile","diseasesFile","economyFile","gameRulesFile","clamp","value","min","max","evalExpression","expr","context","AudioManager","buffer","src","on","_a","_b","_c","label","wavBase64","err","e","resume","opts","freq","type","duration","volume","attack","release","sweepTo","osc","gain","sr","len","data","i","t","env","audioManager","Game","line","f","foods","action","food","s","healthyCount","act","economy","income","healthyStats","k","healthBonus","fitnessMultiplier","d","hist","triggered","disease","trig","ok","v","decay","scaled","lim","clampKeys","delta","add","chance","roll","issues","STAT_ICONS","ROW1","ROW2","previousStats","LOW_DANGER_PCT","LOW_WARNING_PCT","HIGH_WARNING_ABS","HIGH_DANGER_ABS","MONEY_WARNING","MONEY_DANGER","HEALTH_WARNING","HEALTH_DANGER","classifyStat","name","game","limits","pct","qs","sel","el","appendLog","msg","statDelta","key","current","prev","diff","sign","renderStats","container","makeBar","keys","nutrient","inline","bar","rawVal","val","highlight","seg","attachStatBubbleTooltips","snapshotStatsForNextTurn","updateStatsView","updateDaysSurvived","getPreviousStat","stat","updatePenaltyLog","raw","l","dayHeaderRe","eatingRe","emojiRe","rebuilt","pushCurrent","other","seen","display","m","token","eat","limited","classify","activeBubble","showBubble","dismissBubble","anchor","text","bubble","rect","bw","bh","GRID_ROWS","GRID_COLS","DailyRunMinigame","dayDurationMs","seconds","ms","arr","j","tmp","gym","includeGym","items","parts","last","count","r","overlay","badge","prog","now","dt","elapsed","frac","prevHealth","newHealth","gridEl","daysSurvived","reason","bgLayer","panel","heading","skull","title","survived","reasonEl","restart","footer","wrapper","days","currentIndex","tomorrowIndex","nextIndex","btn","cell","st","_d","_f","_e","dayNames","labelDiv","c","div","details","handler","col","rowHeight","newRow","prevRows","temp","visualRows","row","rIdx","labelCell","cIdx","isPlayer","classes","fade","cloneLayer","finish","parentSection","left","autoWrap","auto","oldRow","bottomLayer","strip","totalCols","renderCell","oldStrip","idx","newStrip","slider","oldContainer","newContainer","mini","__wq_overlayHealChecks","__WQ_MAX_HEAL_CHECKS","__wq_healTimer","__wq_scheduleOverlayHeal","buildFn","startedFlagFn","loop","__wq_attachOverlayGuardian","obs","__vite_import_meta_env__","headerIcon","regs","START_FLAG","LEGACY_FLAG","SESSION_FLAG","DIAG","meta","overlayAttempted","urlForce","hasStarted","sessionShown","buildWelcomeOverlay","resetIntroBtn","existing","restartBtn","logEl","statsEl","dayBadge","lbl","bindStart","startBtn","hardshipSlider","detailsToggle","expanded","sliderVal","updateVal","hardshipValue","hardshipLabel","descFor","updateHardship","soundToggle","enabled","oneTimeUnlock","wrap","running","hasOverlay","started","sessionSeen","againOverlay","againStarted","runningNow"],"mappings":"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"}